const express = require("express");
const { Telegraf } = require("telegraf");
const dotenv = require("dotenv");
const linkPreviewGenerator = require("link-preview-generator");
dotenv.config();

const key = process.env.KEY;
const bot = new Telegraf(key);

bot.on("text", async(ctx) => {
	const smsBody = ctx.message.text;
	const info = await linkPreviewGenerator(smsBody);
	console.log(info)
});

bot.launch();
process.once("SIGINT", () => bot.stop("SIGINT"));
process.once("SIGTERM", () => bot.stop("SIGTERM"));

const app = express();
app.listen(3900, () => console.log("Example app is listening on port 3900."));
